<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ§  BitÃ¡cora Mental del Trader â€” Campus CFC LITE</title>

  <!-- âœ… CFC_FUNC_41_10_FINAL_CONTRASTE_FULL_V41.20C -->
  <link rel="stylesheet" href="../css/premium.css?v=20251107" />
  <link rel="stylesheet" href="../css/bitacora.css?v=20251107c" />

  <style>
    /* ğŸ¨ Ajustes adaptativos globales */
    body.light-mode {
      background: #ffffff !important;
      color: #111 !important;
    }
    body.dark-mode {
      background: #000 !important;
      color: #e0e0e0 !important;
    }

    p, label, select, option, input, textarea, button, h3 {
      transition: color 0.3s ease, background 0.3s ease;
    }

    body.light-mode p,
    body.light-mode label,
    body.light-mode select,
    body.light-mode option,
    body.light-mode h3 {
      color: #111 !important;
    }
    body.dark-mode p,
    body.dark-mode label,
    body.dark-mode select,
    body.dark-mode option,
    body.dark-mode h3 {
      color: #f5f5f5 !important;
    }

    .bitacora-header {
      color: var(--color-accent, #d4af37);
      text-align: center;
      margin-top: 15px;
    }

    .bitacora-container {
      max-width: 700px;
      margin: 0 auto;
      padding: 20px;
      border-radius: 12px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    body.light-mode .bitacora-container {
      background: #ffffff;
      box-shadow: 0 0 10px rgba(0,0,0,0.08);
      color: #111;
    }
    body.dark-mode .bitacora-container {
      background: rgba(20,20,20,0.9);
      box-shadow: 0 0 10px rgba(255,215,0,0.15);
      color: #f5f5f5;
    }

    textarea {
      width: 100%;
      height: 100px;
      border-radius: 10px;
      border: 1px solid rgba(255,215,0,0.4);
      padding: 10px;
      font-family: Poppins, sans-serif;
      transition: background 0.3s ease, color 0.3s ease;
    }
    body.light-mode textarea {
      background: #fff;
      color: #000;
    }
    body.dark-mode textarea {
      background: #111;
      color: #fff;
    }

    /* ğŸ§  Listado de reflexiones */
    #list li {
      margin-top: 12px;
      padding: 10px 14px;
      border-radius: 8px;
      border: 1px solid rgba(255,215,0,0.3);
      transition: background 0.3s ease, color 0.3s ease;
      line-height: 1.5;
    }
    body.light-mode #list li {
      background: #fffdf0;
      color: #111;
    }
    body.dark-mode #list li {
      background: rgba(40,40,40,0.9);
      color: #f1f1f1;
    }

    .thought-header strong {
      color: #d4af37;
    }
    .thought-text em {
      color: #d4af37;
      font-weight: 600;
    }

    /* ğŸª¶ Botones */
    .btn-main, .btn-return {
      transition: all 0.3s ease;
      font-weight: 600;
    }

    body.light-mode .btn-main {
      background: #FFD700;
      color: #000;
      border: 2px solid #FFD700;
    }
    body.dark-mode .btn-main {
      background: transparent;
      color: #FFD700;
      border: 2px solid #FFD700;
    }

    body.light-mode .btn-return {
      background: #333;
      color: #FFD700;
      border: 2px solid #FFD700;
    }
    body.dark-mode .btn-return {
      background: #FFD700;
      color: #000;
    }

    /* ğŸŒ™ BotÃ³n flotante de tema */
    #themeToggle {
      position: fixed;
      top: 18px;
      right: 22px;
      background: rgba(255,215,0,0.2);
      border: 2px solid rgba(255,215,0,0.4);
      color: #FFD700;
      border-radius: 50%;
      width: 42px;
      height: 42px;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(8px);
      box-shadow: 0 0 10px rgba(255,215,0,0.3);
      z-index: 9999;
    }
    #themeToggle:hover {
      background: #FFD700;
      color: #000;
      transform: scale(1.05);
    }
  </style>
</head>

<body>
  <!-- ğŸŒ— BotÃ³n de cambio de tema -->
  <div id="themeToggle" title="Cambiar tema">ğŸŒ™</div>

  <h2 class="bitacora-header">ğŸ§  BitÃ¡cora Mental del Trader</h2>
  <p style="text-align:center;">AnotÃ¡ tus pensamientos, reflexiones o aprendizajes del dÃ­a.</p>

  <div class="bitacora-container">
    <div class="bitacora-top">
      <select id="toneSelect">
        <option value="">ğŸŒˆ SeleccionÃ¡ un tono sugerido (opcional)</option>
        <option>Reflexivo / Inspirador</option>
        <option>CientÃ­fico / EnergÃ©tico</option>
        <option>Introceptivo / Focalizado</option>
        <option>Mentalidad / Racional</option>
        <option>Sereno / Controlado</option>
        <option>Motivador / Resiliente</option>
        <option>AnalÃ­tico / Desafiante</option>
        <option>FilosÃ³fico / Sobrio</option>
        <option>Fuerte / Emocional</option>
      </select>

      <div id="iconSelector">
        <span class="icon-option">ğŸ”¥</span><span class="icon-option">ğŸ’¡</span>
        <span class="icon-option">ğŸ¯</span><span class="icon-option">ğŸ§˜â€â™‚ï¸</span>
        <span class="icon-option">âš¡</span><span class="icon-option">ğŸŒ™</span>
        <span class="icon-option">ğŸŒ</span><span class="icon-option">ğŸ§ </span>
        <span class="icon-option">ğŸ’­</span><span class="icon-option">âœ¨</span>
      </div>
    </div>

    <!-- ğŸ”¹ Bloque de filtros -->
    <div class="bitacora-filters" id="filtersBlock">
      <h3 class="filters-title">ğŸ” Filtros de BÃºsqueda</h3>
      <div class="filters-group">
        <label>ğŸ“… Desde:</label><input type="date" id="filterStart" />
        <label>ğŸ“… Hasta:</label><input type="date" id="filterEnd" />
      </div>
      <div class="filters-group">
        <label>ğŸ­ Ãcono:</label>
        <select id="filterIcon">
          <option value="">Todos</option>
          <option>ğŸ”¥</option><option>ğŸ’¡</option><option>ğŸ¯</option>
          <option>ğŸ§˜â€â™‚ï¸</option><option>âš¡</option><option>ğŸŒ™</option>
          <option>ğŸŒ</option><option>ğŸ§ </option><option>ğŸ’­</option><option>âœ¨</option>
        </select>

        <label>ğŸ¨ Tono:</label>
        <select id="filterTone">
          <option value="">Todos</option>
          <option>Reflexivo / Inspirador</option>
          <option>CientÃ­fico / EnergÃ©tico</option>
          <option>Introceptivo / Focalizado</option>
          <option>Mentalidad / Racional</option>
          <option>Sereno / Controlado</option>
          <option>Motivador / Resiliente</option>
          <option>AnalÃ­tico / Desafiante</option>
          <option>FilosÃ³fico / Sobrio</option>
          <option>Fuerte / Emocional</option>
        </select>
      </div>
      <button id="applyFilters" class="btn-main">Aplicar Filtros</button>
      <button id="resetFilters" class="btn-secondary">Reiniciar</button>
    </div>

    <textarea id="thoughts" placeholder="EscribÃ­ aquÃ­ tu reflexiÃ³n..."></textarea><br />
    <button class="btn-main" onclick="saveThought()">Guardar</button>
    <ul id="list"></ul>

    <button class="btn-return" onclick="window.location.href='../pages/profile.html'">â¬… Volver al Perfil</button>
  </div>

  <script src="../js/bitacora.js?v=20251107CFC_FIX4"></script>

  <!-- âœ… Tema sincronizado + botÃ³n -->
  <script>
    function aplicarTemaCFC() {
      const tema = localStorage.getItem("CFC_THEME_STATE") || "dark";
      document.body.classList.toggle("light-mode", tema === "light");
      document.body.classList.toggle("dark-mode", tema === "dark");
      const btn = document.getElementById("themeToggle");
      if (btn) btn.textContent = tema === "light" ? "ğŸŒ" : "ğŸŒ™";
    }
    aplicarTemaCFC();

    window.addEventListener("storage", (e) => {
      if (e.key === "CFC_THEME_STATE") aplicarTemaCFC();
    });

    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("themeToggle");
      if (!btn) return;
      btn.addEventListener("click", () => {
        const current = localStorage.getItem("CFC_THEME_STATE") || "dark";
        const nuevo = current === "dark" ? "light" : "dark";
        localStorage.setItem("CFC_THEME_STATE", nuevo);
        aplicarTemaCFC();
        console.log("ğŸ¨ CFC_THEME_SWITCH â€” BitÃ¡cora:", nuevo);
      });
    });
  </script>

  <!-- ğŸ”’ CFC_LOCK: V41.20C_CONTRASTE_FULL_WHITE_20251107 -->
</body>
</html>
