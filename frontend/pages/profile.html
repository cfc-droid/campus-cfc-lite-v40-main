<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perfil ‚Äî Campus CFC LITE</title>
  <link rel="stylesheet" href="../css/premium.css?v=20251101" />
</head>
<body>
  <header>
    <h2>üë§ Perfil del Usuario</h2>
  </header>

  <main style="text-align:center;">
    <p>Esta es la p√°gina de Perfil del Campus CFC LITE V41 REAL.</p>

    <!-- ‚úÖ CFC_FUNC_10_2_20251101 ‚Äî Visualizaci√≥n de Autoevaluaci√≥n Emocional -->
    <section id="emocion-section" style="margin-top:30px;">
      <h3>üß† Estado Emocional Diario</h3>
      <div id="emotionScore" 
           style="font-size:1.5rem;margin-top:10px;font-weight:bold;color:#FFD700;">
        <!-- valor se inyecta por JS -->
      </div>
      <p id="emotionMessage" style="color:#ccc;font-size:0.9rem;margin-top:8px;">
        <!-- mensaje din√°mico -->
      </p>
    </section>

    <!-- ‚úÖ CFC_FUNC_4_3_20251101 ‚Äî Acceso a Bit√°cora Mental -->
    <div class="bitacora-access" style="margin-top:30px;">
      <button class="btn-bitacora"
              onclick="window.open('../bitacora.html','_blank')">
        üß† Bit√°cora mental
      </button>
      <p style="font-size:0.85rem;color:#aaa;margin-top:6px;">
        Registr√° tus reflexiones y aprendizajes del d√≠a.
      </p>
    </div>

    <!-- ‚úÖ CFC_FUNC_4_5_20251101_NAVBACK ‚Äî Retorno al √çndice -->
    <div class="return-container" style="margin-top:25px;">
      <button class="btn-return"
              onclick="window.location.href='../modules/index.html'">
        ‚¨Ö Volver al Campus
      </button>
    </div>

    <!-- ==========================================================
    ‚úÖ CFC_FUNC_8_7_20251102_FINAL ‚Äî Interfaz Backup/Restore a√±adida
    ========================================================== -->
    <section id="backupSection" style="margin-top:40px;text-align:center;">
      <h3 style="color:#FFD700;margin-bottom:10px;">üíæ Gesti√≥n de respaldo</h3>

      <button onclick="backupData()" 
        style="background:linear-gradient(90deg,#FFD700,#FFEC8B);border:none;border-radius:10px;padding:10px 20px;font-weight:700;color:#000;cursor:pointer;margin:6px;">
        Exportar Backup
      </button>

      <label for="restoreInput" style="display:inline-block;margin-top:8px;font-size:0.9rem;color:#ccc;">
        Restaurar desde archivo JSON:
      </label>
      <input type="file" id="restoreInput" accept=".json" onchange="restoreData(this.files[0])" 
        style="margin-left:10px;padding:6px;border-radius:8px;border:none;background:#222;color:#FFD700;cursor:pointer;">

      <p style="margin-top:10px;font-size:0.85rem;color:#888;">
        ‚ö†Ô∏è Se recomienda realizar un respaldo antes de limpiar el progreso o reinstalar el Campus.
      </p>
    </section>
  </main>

  <div id="footer-placeholder"></div>
  <script src="../js/footer.js" defer></script>

  <!-- ‚úÖ CFC_FUNC_10_2_20251101 ‚Äî Script de visualizaci√≥n emocional -->
  <script>
    const scoreRaw = localStorage.getItem('emotionScore');
    const box = document.getElementById('emotionScore');
    const msg = document.getElementById('emotionMessage');

    if (scoreRaw && !isNaN(parseInt(scoreRaw))) {
      const val = parseInt(scoreRaw, 10);
      let emoji = "üôÇ", mensaje = "Buen enfoque mental.";
      if (val <= 3) { emoji = "üòî"; mensaje = "Momento de reconectar con tu calma."; }
      else if (val <= 6) { emoji = "üòê"; mensaje = "Est√°s estable, pero pod√©s mejorar tu enfoque."; }
      else if (val <= 8) { emoji = "üòä"; mensaje = "Excelente disciplina emocional."; }
      else if (val <= 10) { emoji = "üî•"; mensaje = "M√°xima claridad mental, segu√≠ as√≠."; }

      box.textContent = `${emoji} ${val}/10`;
      msg.textContent = mensaje;
      console.log(`üß† Estado emocional mostrado: ${val}/10 ‚Äî ${mensaje}`);
    } else {
      box.textContent = "‚ö†Ô∏è A√∫n no registraste tu emoci√≥n de hoy.";
      msg.textContent = "Registr√° tu autoevaluaci√≥n al cargar el Campus.";
      console.warn("‚ö†Ô∏è No se encontr√≥ valor emocional v√°lido en localStorage.");
    }
  </script>

  <!-- üß© Log de auditor√≠a -->
  <script>
    console.log("üß© CFC_SYNC checkpoint: profile.html | Backup UI P8.7 FINAL", new Date().toLocaleString());
  </script>

  <!-- üîí CFC_LOCK: V41.11-profile_backup-20251102-1748 -->
</body>
</html>
